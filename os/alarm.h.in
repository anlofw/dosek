#include "counter.h"
#include "alarm.h"

namespace os {

void inlinehint Counter::tick() {
    {{{snippet:increase_counter:name|%(name)s.do_tick();
    Alarm::checkCounter(%(name)s);
    }}}
    {{{generate:increase_and_check_counters}}}
}

void inlinehint Alarm::checkCounter(const Counter &counter) {
	(void) counter; // unused argument warning might happen

    {{{snippet:alarm_alarmcallback:callback|    %(callback)s();}}}
    {{{snippet:if_alarm:counter,alarm|if ((&counter == &%(counter)s) && %(alarm)s.checkTrigger()) {
    debug << "Alarm %(alarm)s triggered" << endl;}}}
    {{{snippet:endif_alarm:counter,alarm|} }}}
    {{{generate:trigger_alarms}}}
}


} // os
