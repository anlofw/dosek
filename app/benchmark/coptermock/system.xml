<?xml version="1.0"?>

<system xmlns              = "http://www4.informatik.uni-erlangen.de/RTSC"
	xmlns:xsi          = "http://www.w3.org/2001/XMLSchema-instance">

  <name>CopterMock</name>
  <mappingtype>name</mappingtype>
  <granule>ms</granule>
  <resolution>1</resolution>
  <systemtype>OSEKOS</systemtype>

  <periodicevent>
    <identifier>SignalGatherEvent</identifier>
    <period>3</period>
    <phase>0</phase>
    <jitter>0</jitter>
  </periodicevent>

  <periodicevent>
    <identifier>FlightControlEvent</identifier>
    <period>9</period>
    <phase>0</phase>
    <jitter>0</jitter>
  </periodicevent>

  <nonperiodicevent>
    <identifier>MavlinkReceiveEvent</identifier>
    <interarrivaltime>9000</interarrivaltime>
  </nonperiodicevent>

  <task promise-serialized="true">
    <event>SignalGatherEvent</event>

    <subtask root="true">
      <handler>SignalGatherInitiateTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>

    <subtask>
      <handler>SignalGatherFinishedTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>

    <subtask>
      <handler>SignalGatherTimeoutTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>

    <subtask>
      <handler>SignalProcessingActuateTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>

    <subtask>
      <handler>SignalProcessingAttitudeTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>
  </task>

  <task promise-serialized="true">
    <event>FlightControlEvent</event>
    <subtask root="true">
      <handler>FlightControlTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>

    <subtask>
      <handler>FlightControlAttitudeTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>

    <subtask>
      <handler>FlightControlActuateTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>

    <subtask>
        <handler>MavlinkSendTask</handler>
        <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>
  </task>

  <task promise-serialized="true">
    <event>MavlinkReceiveEvent</event>

    <subtask root="true">
      <handler>MavlinkRecvHandler</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>

    <subtask>
      <handler>CopterControlTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>
  </task>

  <task promise-serialized="true">
    <event>MavlinkReceiveEvent</event>

    <subtask root="true">
      <handler>CopterControlWatchdogTask</handler>
      <deadline> <relative>true</relative> <type>hard</type> <deadline>200</deadline> </deadline>
    </subtask>
  </task>


  <specificdescription>osekossystem.xml</specificdescription>
</system>
